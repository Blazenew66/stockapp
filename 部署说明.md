# 🔒 Token安全配置说明

## 问题解决
已修复Tushare token直接写在代码中的安全问题，现在使用环境变量管理。

## 本地部署

### 1. 创建环境变量文件
```bash
# 复制示例文件
cp env_example.txt .env

# 编辑.env文件，填入你的真实token
TUSHARE_TOKEN=你的真实token
```

### 2. 运行应用
```bash
streamlit run a_stock_web_app.py
```

## Streamlit Cloud部署

### 1. 设置Secrets
在Streamlit Cloud项目设置中添加Secrets：

```toml
[secrets]
TUSHARE_TOKEN = "你的真实token"
```

### 2. 部署步骤
1. 推送代码到GitHub
2. 在Streamlit Cloud连接GitHub仓库
3. 在Secrets中设置TUSHARE_TOKEN
4. 部署应用

## 安全特性

### ✅ 已修复
- Token不再直接写在代码中
- 使用环境变量管理敏感信息
- 添加.gitignore保护敏感文件
- 代码中无token暴露风险

### 🛡️ 安全措施
- 环境变量隔离
- Git忽略敏感文件
- 空值检查和降级处理
- 模拟数据兜底机制

## 注意事项

1. **不要**将.env文件上传到GitHub
2. **确保**在.gitignore中包含.env
3. **定期**更换Tushare token
4. **监控**token使用情况

## 故障排除

如果看到"未设置TUSHARE_TOKEN环境变量"警告：
- 检查.env文件是否存在
- 确认token格式正确
- 验证环境变量设置

应用会自动降级到模拟数据，不影响基本功能。
